
<div *ngIf="loading">Loading…</div>
<div *ngIf="!loading && error" class="error">{{ error }}</div>

<div *ngIf="!loading && !error">
  <div *ngIf="viewMode === 'scroll'" class="scroll-wrapper">

    <div class="auto-scroll">
      <div class="scroll-card" *ngFor="let product of productsToShow">
        <div class="only-name-card">

          <img
            [src]="'https://ecom-backend-production-c71b.up.railway.app/assets/images/' + product.currentImage"
            class="product-img"
            alt="{{ product.name }}"
            (click)="openProductDetails(product)"
            (mouseenter)="onHoverImage(product)"
            (mouseleave)="onLeaveImage(product)"
            (error)="onImgError($event)"
          />

          <h2 class="only-name" (click)="openProductDetails(product)">
            {{ product.name }}
          </h2>

        </div>
      </div>
    </div>

    <div class="view-all-container">
      <button class="shop2-btn" (click)="viewAllProducts()">View All</button>
    </div>

  </div>


  <!-- ================================================= -->
  <!-- =============== FULL DETAILS GRID ================ -->
  <!-- =========== (CATEGORY / PRODUCTS/:ID) ============ -->
  <!-- ================================================= -->
  <div *ngIf="viewMode === 'full'" class="product-grid">
  <div class="product-card" *ngFor="let product of productsToShow">
    <div class="full-details-card">

      <img
        [src]="'https://ecom-backend-production-c71b.up.railway.app/assets/images/' + product.currentImage"
        class="product-img"
        alt="{{ product.name }}"
        (click)="openProductDetails(product)"
        (mouseenter)="onHoverImage(product)"
        (mouseleave)="onLeaveImage(product)"
        (error)="onImgError($event)"
      />

      <div class="product-info">
        <h3>{{ product.name }}</h3>
        <p class="price">
          {{ product.price | currency:'INR':'symbol':'1.2-2' }}
        </p>
      </div>

    </div>
  </div>
</div>

<!-- ✅ SHOW ONLY WHEN THERE ARE NO PRODUCTS -->
<div
  class="no-collection"
  *ngIf="viewMode === 'full' && !loading && productsToShow.length === 0"
>
  <video
    class="no-collection-video"
    autoplay
    muted
    loop
    playsinline
    preload="auto"
  >
    <source src="../../../assets/images/Coming Soon (2).mp4" type="video/mp4" />
  </video>

  <h3>No Collection Available</h3>
  <p>New gold ornaments arriving soon ✨</p>
</div>

  <!-- ================================================= -->
  <!-- =============== VIEW ALL GRID =================== -->
  <!-- ========== (NAME + MRP ONLY GRID) =============== -->
  <!-- ================================================= -->
  <div *ngIf="viewMode === 'names'" class="product-grid">

    <div class="product-card" *ngFor="let product of productsToShow">

      <div class="only-name-card">

        <img
          [src]="'https://ecom-backend-production-c71b.up.railway.app/assets/images/' + product.currentImage"
          class="product-img"
          alt="{{ product.name }}"
          (click)="openProductDetails(product)"
          (mouseenter)="onHoverImage(product)"
          (mouseleave)="onLeaveImage(product)"
          (error)="onImgError($event)"
        />

        <h2 class="only-name">{{ product.name }}</h2>
        <h3 class="only-name">MRP : {{ product.price }} /-</h3>

      </div>

    </div>

  </div>


  <!-- ================= EMPTY STATE ================= -->
  <ng-template #empty>
    <p>No products found.</p>
  </ng-template>

</div>
