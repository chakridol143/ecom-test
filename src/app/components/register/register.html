<div class="modal-overlay" (click)="onClose()"></div>

<div class="register-popup">
  <div class="register-box">
    <h2>Create Account</h2>

    <form (ngSubmit)="onRegister()" #registerForm="ngForm" novalidate>

      <div class="form-group">
        <label>Full Name</label>
        <input type="text" name="username" [(ngModel)]="username" placeholder="Enter your full name" required
          minlength="3" #usernameRef="ngModel" />

        <div class="error" *ngIf="usernameRef.invalid && usernameRef.touched">
          <small *ngIf="usernameRef.errors?.['required']">Full name is required.</small>
        </div>
      </div>

      <div class="form-group">
        <label>Email Address</label>
        <input type="email" name="email" [(ngModel)]="email" placeholder="example@email.com" required
          pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" #emailRef="ngModel" />

        <div class="error" *ngIf="emailRef.invalid && emailRef.touched">
          <small *ngIf="emailRef.errors?.['required']">Email is required.</small>
          <small *ngIf="emailRef.errors?.['email']">Enter a valid email.</small>
          <small *ngIf="emailRef.errors?.['pattern']">
            Email must include letters, numbers, '@' and a proper domain like example@gmail.com.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>Password</label>
        <input type="password" name="password" [(ngModel)]="password" placeholder="Create a password" required
          minlength="6" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$"
          #passwordRef="ngModel" />

        <div class="error" *ngIf="passwordRef.invalid && passwordRef.touched">
          <small *ngIf="passwordRef.errors?.['required']">Password is required.</small>
          <small *ngIf="passwordRef.errors?.['minlength']">Minimum 6 characters required.</small>
          <small *ngIf="passwordRef.errors?.['pattern']">
            Password must be a combination of capital letters, small letters, numbers, and special characters.
          </small>

        </div>
      </div>

      <div class="form-group">
        <label>Confirm Password</label>
        <input type="password" name="confirmPassword" [(ngModel)]="confirmPassword" placeholder="Re-enter password"
          required minlength="6" #confirmPasswordRef="ngModel" />

        <div class="error" *ngIf="confirmPasswordRef.invalid && confirmPasswordRef.touched">
          <small *ngIf="confirmPasswordRef.errors?.['required']">Please confirm your password.</small>
          <small *ngIf="confirmPasswordRef.errors?.['minlength']">Minimum 6 characters required.</small>
        </div>
        <div class="error" *ngIf="confirmPassword && confirmPassword !== password && confirmPasswordRef.touched">
          <small>Passwords do not match.</small>
        </div>
      </div>

      <div class="form-group">
        <label>Phone Number</label>
        <input type="text" name="phone" [(ngModel)]="phone" placeholder="Enter your phone number" required
          pattern="^[0-9]{10}$" #phoneRef="ngModel" />

        <div class="error" *ngIf="phoneRef.invalid && phoneRef.touched">
          <small *ngIf="phoneRef.errors?.['required']">Phone number is required.</small>
          <small *ngIf="phoneRef.errors?.['pattern']">Enter a valid 10-digit number.</small>
        </div>
      </div>

      <div class="form-group">
        <label>Address</label>
        <input type="text" name="address" [(ngModel)]="address" placeholder="Enter your location / city" required
          #addressRef="ngModel" />

        <div class="error" *ngIf="addressRef.invalid && addressRef.touched">
          <small *ngIf="addressRef.errors?.['required']">Address is required.</small>
        </div>
      </div>

      <button type="submit" [disabled]="registerForm.invalid || password !== confirmPassword">Register</button>

      <button type="button" class="reset-btn" (click)="onReset()">Reset</button>
      <!-- <button type="button" class="reset-btn" (click)="onClose()">Close</button> -->
       <button type="button" class="reset-btn" routerLink="/login">Login</button>

    </form>
  </div>
</div>