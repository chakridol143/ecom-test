<!-- <app-navbar (productClicked)="onProductSelected($event)"></app-navbar> -->
      <app-slider (categorySelect)="onCategorySelected($event)"></app-slider>
<app-navbar 
  (womenCollectionClick)="showWomenCollections()"
  (productClicked)="onProductSelected($event)"
  (newReleasesClick)="showNewReleases()"
  (bestSellersClick)="showBestSellers()"
  (mensCollectionClick)="showMensCollections()">
</app-navbar>

<div class="menu-container">

  <!-- PRODUCT DETAILS VIEW -->
  <div class="content" *ngIf="selectedProduct">
    <div class="product-card">
      <button class="close-btn" (click)="closeProductView()">✖</button>

      <img [src]="'https://ecom-backend-production-5341.up.railway.app/assets/images/' + selectedProduct.image_url" />
      <h1>{{ selectedProduct.name }}</h1>
      <p>{{ selectedProduct.description }}</p>
      <h3>₹{{ selectedProduct.price }}</h3>
    </div>
  </div>


  <!-- MAIN CONTAINER WHEN NO PRODUCT SELECTED -->
  <ng-container *ngIf="!selectedProduct">

    <!-- CATEGORY LIST -->
    <div class="category-row" *ngIf="categories?.length && 
                                     !showWomensCollection &&
                                     !showReleases &&
                                     !showBestsellers &&
                                     !showMensCollection">

      <div class="category-box"
          *ngFor="let category of categories; trackBy: trackByCategoryId"
          (click)="selectCategory(category)"
          [class.active]="selectedCategoryId === category.category_id">

        <img 
          [src]="getImageUrl(category.image_url)"
          [alt]="category.name"
          (error)="onImageError($event)"
        />

        <p>{{ category.name }}</p>
      </div>
    </div>


    <!-- SPECIAL COLLECTIONS (Priority View) -->
    <div class="content">

      <!-- WOMENS COLLECTION -->
      <app-womens-collections 
        *ngIf="showWomensCollection" 
        (close)="closeWomensCollection()">
      </app-womens-collections>

      <!-- NEW RELEASES -->
      <app-releases 
        *ngIf="showReleases" 
        (close)="closeReleases()">
      </app-releases>

      <!-- BESTSELLERS -->
      <app-bestsellers 
        *ngIf="showBestsellers" 
        (close)="closeBestsellers()">
      </app-bestsellers>

      <!-- MENS COLLECTION -->
      <app-mens-collections 
        *ngIf="showMensCollection" 
        (close)="closeMensCollections()">
      </app-mens-collections>


      <!-- DEFAULT MAIN PAGE CONTENT (Only if no collection tab is open) -->
      <ng-container 
        *ngIf="!showWomensCollection && 
               !showReleases && 
               !showBestsellers && 
               !showMensCollection">

  

        <h1 *ngIf="selectedCategory">{{ selectedCategory.name }}</h1>

        <app-products 
          [searchTerm]="searchTerm"
          [categoryId]="selectedCategoryId"
          (addToCartEvent)="handleAddToCart($event)">
        </app-products>

        <app-cart 
          [cartCount]="cartCount"
          [items]="cartItems">
        </app-cart>

      </ng-container>

    </div>
  </ng-container>

</div>